import{createElement as e,Fragment as r}from"../../../external/preact/dist/preact.js";import{useRef as t,useMemo as a,useEffect as l}from"../../../external/preact/hooks/dist/hooks.js";import s from"../FormFields/Fieldset/Fieldset.js";import i from"../FormFields/Field/Field.js";import o from"./ReadOnlyPersonalDetails.js";import{personalDetailsValidationRules as n}from"./validate.js";import{useCoreContext as m}from"../../../core/Context/CoreProvider.js";import{checkDateInputSupport as p}from"../FormFields/InputDate/utils.js";import{getFormattedData as u}from"./utils.js";import d from"../../../utils/useForm/useForm.js";import c from"../FormFields/InputText.js";import f from"../FormFields/InputDate/InputDate.js";import h from"../FormFields/InputEmail.js";import b from"../FormFields/InputTelephone.js";import{getErrorMessage as N}from"../../../utils/getErrorMessage.js";function O(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(r){O(e,r,t[r])})}return e}function j(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r}(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}const F=["firstName","lastName","dateOfBirth","shopperEmail","telephoneNumber"];function y(O){const{label:F="",namePrefix:y,placeholders:v,requiredFields:M,visibility:B}=O,{i18n:E}=m(),P=t({});var I;Object.keys(P.current).length||(null===(I=O.setComponentRef)||void 0===I||I.call(O,P.current));const w=a(p,[]),{handleChangeFor:D,triggerValidation:C,data:k,valid:q,errors:x,isValid:R}=d({schema:M,rules:g({},n,O.validationRules),defaultData:O.data});P.current.showValidation=()=>{C()};const S=e=>r=>{const{name:t}=r.target,a=t.split(`${y}.`).pop();D(a,e)(r)},V=e=>`${y?`${y}.`:""}${e}`;return l(()=>{const e=u(k);O.onChange({data:e,valid:q,errors:x,isValid:R})},[k,q,x,R]),"hidden"===B?null:"readOnly"===B?e(o,j(g({},O),{data:k})):e(r,null,e(s,{classNameModifiers:["personalDetails"],label:F},M.includes("firstName")&&e(i,{label:E.get("firstName"),classNameModifiers:["col-50","firstName"],errorMessage:N(E,x.firstName,E.get("firstName")),name:"firstName",i18n:E},e(c,{name:V("firstName"),value:k.firstName,classNameModifiers:["firstName"],onInput:S("input"),onBlur:S("blur"),placeholder:v.firstName,spellCheck:!1,required:!0})),M.includes("lastName")&&e(i,{label:E.get("lastName"),classNameModifiers:["col-50","lastName"],errorMessage:N(E,x.lastName,E.get("lastName")),name:"lastName",i18n:E},e(c,{name:V("lastName"),value:k.lastName,classNameModifiers:["lastName"],onInput:S("input"),onBlur:S("blur"),placeholder:v.lastName,spellCheck:!1,required:!0})),M.includes("dateOfBirth")&&e(i,{label:E.get("dateOfBirth"),classNameModifiers:["col-50","dateOfBirth"],errorMessage:N(E,x.dateOfBirth,E.get("dateOfBirth")),helper:w?null:E.get("dateOfBirth.format"),name:"dateOfBirth",i18n:E},e(f,{name:V("dateOfBirth"),value:k.dateOfBirth,classNameModifiers:["dateOfBirth"],onInput:S("input"),onBlur:S("blur"),placeholder:v.dateOfBirth,required:!0})),M.includes("shopperEmail")&&e(i,{label:E.get("shopperEmail"),classNameModifiers:["shopperEmail"],errorMessage:N(E,x.shopperEmail,E.get("shopperEmail")),dir:"ltr",name:"emailAddress",i18n:E},e(h,{name:V("shopperEmail"),value:k.shopperEmail,classNameModifiers:["shopperEmail"],onInput:S("input"),onBlur:S("blur"),placeholder:v.shopperEmail,required:!0})),M.includes("telephoneNumber")&&e(i,{label:E.get("telephoneNumber"),classNameModifiers:["telephoneNumber"],errorMessage:N(E,x.telephoneNumber,E.get("telephoneNumber")),dir:"ltr",name:"telephoneNumber",i18n:E},e(b,{name:V("telephoneNumber"),value:k.telephoneNumber,classNameModifiers:["telephoneNumber"],onInput:S("input"),onBlur:S("blur"),placeholder:v.telephoneNumber,required:!0}))))}y.defaultProps={data:{},onChange:()=>{},placeholders:{},requiredFields:F,validationRules:n,visibility:"editable"};export{F as PERSONAL_DETAILS_SCHEMA,y as default};
//# sourceMappingURL=PersonalDetails.js.map
