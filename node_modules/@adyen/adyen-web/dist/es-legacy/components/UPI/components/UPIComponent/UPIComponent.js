import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as n,useCallback as a,useEffect as o}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../VpaInput/VpaInput.js";import i from"../../../../core/Context/useImage.js";import{A11Y as l}from"../../constants.js";import s from"../../../internal/SegmentedControl/SegmentedControl.js";import d from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as u}from"../../../../core/Context/CoreProvider.js";import c from"../../../internal/Alert/Alert.js";import p from"../UPIMandate/UPIMandate.js";function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){m(e,t,n[t])})}return e}function b({defaultMode:m,onChange:b,payButton:f,showPayButton:y,mandate:I,amount:h,onUpdateMode:j=()=>{},apps:C=[],segmentedControlOptions:v=[]}){const{i18n:A}=u(),N=i(),[P,k]=n("ready"),[S,O]=n(m),[V,q]=n(null),[w,x]=n(null),[B,E]=n("qrCode"===m),M=I&&e(p,{mandate:I,amount:h});this.setStatus=e=>{k(e)},this.showValidation=()=>{null==V||V.validateInput(),"intent"===S&&R()};const U=a(e=>{q(e)},[]),T=a(e=>{O(e),j(e)},[j]),Q=a(e=>{(null==e?void 0:e.id)!==(null==w?void 0:w.id)&&(x(e),E(!0),k("ready"))},[w]),R=a(()=>{w?(k("ready"),E(!0)):(k("error"),E(!1))},[w]);return o(()=>{b("qrCode"!==S?{data:g({},w&&{app:w}),isValid:B}:{data:{},valid:{},errors:{},isValid:!0})},[w,B,S,b]),e(t,null,v.length>0&&e("p",{className:"adyen-checkout_upi-mode-selection-text"},A.get("upi.modeSelection")),e(s,{onChange:T,selectedValue:S,disabled:"loading"===P,classNameModifiers:["upi-margin-bottom"],options:v}),"intent"===S&&e("div",{id:l.AreaId.INTENT,"aria-labelledby":l.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},A.get("upi.intent.instruction")),"error"===P&&e(c,{icon:"cross"},A.get("upi.error.noAppSelected")),e(d,{disabled:"loading"===P,apps:C,selectedAppId:null==w?void 0:w.id,onAppSelect:Q}),M,y&&f({label:A.get("continue"),status:P})),"vpa"===S&&e("div",{id:l.AreaId.VPA,"aria-labelledby":l.ButtonId.VPA,className:"adyen-checkout-upi-area-vpa",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},A.get("upi.collect.instruction")),e(r,{disabled:"loading"===P,onChange:b,onSetInputHandlers:U}),M,y&&f({label:A.get("continue"),status:P})),"qrCode"===S&&e("div",{id:l.AreaId.QR,"aria-labelledby":l.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},A.get("upi.qrCode.instruction")),M,y&&f({label:A.get("generateQRCode"),icon:N({imageFolder:"components/"})("qr"),status:P})))}export{b as default};
//# sourceMappingURL=UPIComponent.js.map
