import{createElement as e,Fragment as r}from"../../../external/preact/dist/preact.js";import{useRef as a,useMemo as t,useEffect as s}from"../../../external/preact/hooks/dist/hooks.js";import l from"../FormFields/Fieldset/Fieldset.js";import i from"../FormFields/Field/Field.js";import o from"./ReadOnlyPersonalDetails.js";import{personalDetailsValidationRules as m}from"./validate.js";import{useCoreContext as n}from"../../../core/Context/CoreProvider.js";import{checkDateInputSupport as d}from"../FormFields/InputDate/utils.js";import{getFormattedData as p}from"./utils.js";import u from"../../../utils/useForm/useForm.js";import f from"../FormFields/InputText.js";import h from"../FormFields/InputDate/InputDate.js";import c from"../FormFields/InputEmail.js";import N from"../FormFields/InputTelephone.js";import{getErrorMessage as b}from"../../../utils/getErrorMessage.js";const g=["firstName","lastName","dateOfBirth","shopperEmail","telephoneNumber"];function F(g){const{label:F="",namePrefix:M,placeholders:B,requiredFields:j,visibility:O}=g,{i18n:E}=n(),v=a({});Object.keys(v.current).length||g.setComponentRef?.(v.current);const I=t(d,[]),{handleChangeFor:C,triggerValidation:q,data:x,valid:D,errors:k,isValid:y}=u({schema:j,rules:{...m,...g.validationRules},defaultData:g.data});v.current.showValidation=()=>{q()};const R=e=>r=>{const{name:a}=r.target,t=a.split(`${M}.`).pop();C(t,e)(r)},P=e=>`${M?`${M}.`:""}${e}`;return s(()=>{const e=p(x);g.onChange({data:e,valid:D,errors:k,isValid:y})},[x,D,k,y]),"hidden"===O?null:"readOnly"===O?e(o,{...g,data:x}):e(r,null,e(l,{classNameModifiers:["personalDetails"],label:F},j.includes("firstName")&&e(i,{label:E.get("firstName"),classNameModifiers:["col-50","firstName"],errorMessage:b(E,k.firstName,E.get("firstName")),name:"firstName",i18n:E},e(f,{name:P("firstName"),value:x.firstName,classNameModifiers:["firstName"],onInput:R("input"),onBlur:R("blur"),placeholder:B.firstName,spellCheck:!1,required:!0})),j.includes("lastName")&&e(i,{label:E.get("lastName"),classNameModifiers:["col-50","lastName"],errorMessage:b(E,k.lastName,E.get("lastName")),name:"lastName",i18n:E},e(f,{name:P("lastName"),value:x.lastName,classNameModifiers:["lastName"],onInput:R("input"),onBlur:R("blur"),placeholder:B.lastName,spellCheck:!1,required:!0})),j.includes("dateOfBirth")&&e(i,{label:E.get("dateOfBirth"),classNameModifiers:["col-50","dateOfBirth"],errorMessage:b(E,k.dateOfBirth,E.get("dateOfBirth")),helper:I?null:E.get("dateOfBirth.format"),name:"dateOfBirth",i18n:E},e(h,{name:P("dateOfBirth"),value:x.dateOfBirth,classNameModifiers:["dateOfBirth"],onInput:R("input"),onBlur:R("blur"),placeholder:B.dateOfBirth,required:!0})),j.includes("shopperEmail")&&e(i,{label:E.get("shopperEmail"),classNameModifiers:["shopperEmail"],errorMessage:b(E,k.shopperEmail,E.get("shopperEmail")),dir:"ltr",name:"emailAddress",i18n:E},e(c,{name:P("shopperEmail"),value:x.shopperEmail,classNameModifiers:["shopperEmail"],onInput:R("input"),onBlur:R("blur"),placeholder:B.shopperEmail,required:!0})),j.includes("telephoneNumber")&&e(i,{label:E.get("telephoneNumber"),classNameModifiers:["telephoneNumber"],errorMessage:b(E,k.telephoneNumber,E.get("telephoneNumber")),dir:"ltr",name:"telephoneNumber",i18n:E},e(N,{name:P("telephoneNumber"),value:x.telephoneNumber,classNameModifiers:["telephoneNumber"],onInput:R("input"),onBlur:R("blur"),placeholder:B.telephoneNumber,required:!0}))))}F.defaultProps={data:{},onChange:()=>{},placeholders:{},requiredFields:g,validationRules:m,visibility:"editable"};export{g as PERSONAL_DETAILS_SCHEMA,F as default};
//# sourceMappingURL=PersonalDetails.js.map
