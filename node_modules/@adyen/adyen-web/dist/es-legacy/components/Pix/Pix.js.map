{"version":3,"file":"Pix.js","sources":["../../../../src/components/Pix/Pix.tsx"],"sourcesContent":["import { h } from 'preact';\nimport QRLoaderContainer from '../helpers/QRLoaderContainer/QRLoaderContainer';\nimport PixInput from './components/PixInput';\nimport { cleanCPFCNPJ } from '../internal/SocialSecurityNumberBrazil/utils';\nimport { PixElementData, PixConfiguration } from './types';\nimport { TxVariants } from '../tx-variants';\nimport { QRLoader } from '../internal/QRLoader';\nimport SRPanelProvider from '../../core/Errors/SRPanelProvider';\nimport PixQRDetails from './components/PixQRDetails';\nimport './Pix.scss';\n\nclass PixElement extends QRLoaderContainer<PixConfiguration> {\n    public static type = TxVariants.pix;\n\n    public static defaultProps = {\n        personalDetailsRequired: false,\n        countdownTime: 15,\n        delay: 2000,\n        ...QRLoaderContainer.defaultProps\n    };\n\n    get isValid(): boolean {\n        return !!this.state.isValid;\n    }\n\n    formatProps(props: PixConfiguration): PixConfiguration {\n        return {\n            copyBtn: true,\n            introduction: 'pix.instructions',\n            ...super.formatProps(props)\n        };\n    }\n\n    formatData(): PixElementData {\n        const { data = {} } = this.state;\n        const { firstName, lastName, socialSecurityNumber = '' } = data;\n\n        return {\n            paymentMethod: {\n                type: this.props.type || this.constructor['type']\n            },\n            ...(firstName && lastName && { shopperName: { firstName, lastName } }),\n            ...(socialSecurityNumber && { socialSecurityNumber: cleanCPFCNPJ(socialSecurityNumber) })\n        };\n    }\n\n    renderQRCode() {\n        return (\n            <SRPanelProvider srPanel={this.props.modules.srPanel}>\n                <QRLoader\n                    {...this.props}\n                    type={this.type}\n                    brandLogo={this.props.brandLogo || this.icon}\n                    onComplete={this.onComplete}\n                    onActionHandled={this.onActionHandled}\n                    brandName={this.displayName}\n                    onSubmitAnalytics={this.submitAnalytics}\n                >\n                    <PixQRDetails />\n                </QRLoader>\n            </SRPanelProvider>\n        );\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        if (this.props.paymentData) {\n            return this.renderQRCode();\n        }\n\n        return (\n            <PixInput\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                {...this.props}\n                showPayButton={this.props.showPayButton}\n                personalDetailsRequired={this.props.personalDetailsRequired}\n                name={this.displayName}\n                onChange={this.setState}\n                payButton={this.payButton}\n            />\n        );\n    }\n}\n\nexport default PixElement;\n"],"names":["PixElement","QRLoaderContainer","isValid","this","state","formatProps","props","_object_spread","copyBtn","introduction","super","formatData","data","firstName","lastName","socialSecurityNumber","paymentMethod","type","constructor","shopperName","cleanCPFCNPJ","renderQRCode","h","SRPanelProvider","srPanel","modules","QRLoader","brandLogo","icon","onComplete","onActionHandled","brandName","displayName","onSubmitAnalytics","submitAnalytics","PixQRDetails","componentToRender","paymentData","PixInput","ref","componentRef","showPayButton","personalDetailsRequired","name","onChange","setState","payButton","_define_property","TxVariants","pix","defaultProps","countdownTime","delay"],"mappings":"ghDAWA,MAAMA,UAAmBC,EAUrB,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAEAG,WAAAA,CAAYC,GACR,OAAOC,EAAA,CACHC,SAAS,EACTC,aAAc,oBACXC,MAAML,YAAYC,GAE7B,CAEAK,UAAAA,GACI,MAAMC,KAAEA,EAAO,IAAOT,KAAKC,OACrBS,UAAEA,EAASC,SAAEA,EAAQC,qBAAEA,EAAuB,IAAOH,EAE3D,OAAOL,EAAA,CACHS,cAAe,CACXC,KAAMd,KAAKG,MAAMW,MAAQd,KAAKe,YAAY,OAE1CL,GAAaC,GAAY,CAAEK,YAAa,CAAEN,YAAWC,aACrDC,GAAwB,CAAEA,qBAAsBK,EAAaL,IAEzE,CAEAM,YAAAA,GACI,OACIC,EAACC,EAAAA,CAAgBC,QAASrB,KAAKG,MAAMmB,QAAQD,SACzCF,EAACI,EAAAA,EAAAA,EAAAA,GACOvB,KAAKG,OAAK,CACdW,KAAMd,KAAKc,KACXU,UAAWxB,KAAKG,MAAMqB,WAAaxB,KAAKyB,KACxCC,WAAY1B,KAAK0B,WACjBC,gBAAiB3B,KAAK2B,gBACtBC,UAAW5B,KAAK6B,YAChBC,kBAAmB9B,KAAK+B,kBAExBZ,EAACa,EAAAA,OAIjB,CAEmBC,iBAAAA,GACf,OAAIjC,KAAKG,MAAM+B,YACJlC,KAAKkB,eAIZC,EAACgB,EAAAA,EAAAA,EAAAA,CACGC,IAAKA,IACDpC,KAAKqC,aAAeD,IAEpBpC,KAAKG,OAAK,CACdmC,cAAetC,KAAKG,MAAMmC,cAC1BC,wBAAyBvC,KAAKG,MAAMoC,wBACpCC,KAAMxC,KAAK6B,YACXY,SAAUzC,KAAK0C,SACfC,UAAW3C,KAAK2C,YAG5B,EAtEAC,EADE/C,EACYiB,OAAO+B,EAAWC,KAEhCF,EAHE/C,EAGYkD,eAAe3C,EAAA,CACzBmC,yBAAyB,EACzBS,cAAe,GACfC,MAAO,KACJnD,EAAkBiD"}