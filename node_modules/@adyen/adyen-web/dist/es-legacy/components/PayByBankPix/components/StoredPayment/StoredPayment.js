import{createElement as t}from"../../../../external/preact/dist/preact.js";import{useState as e,useRef as n,useCallback as o,useEffect as a}from"../../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as i}from"../../../../core/Context/CoreProvider.js";import r from"../../../../core/Context/useImage.js";import s from"../../../internal/PayButton/PayButton.js";import l from"./getAuthorizationStatus.js";import p from"../Enrollment/components/PayByBankPixAwait.js";function c({onPay:c,type:m,countdownTime:u,amount:f,txVariant:y,setComponentRef:d,enrollmentId:x,initiationId:b,clientKey:g,onAuthorize:k,onError:w}){const{i18n:C,loadingContext:h}=i(),j=r(),[P,B]=e("ready"),[E,I]=e(null),z=[{name:"open-finance",alt:C.get("paybybankpix.await.logoAlt.openFinance"),src:`${j({parentFolder:`${y}/`})("open-finance")}`}],A=n({setStatus:B}),S=o(async()=>{if(E)return;const t=await l({enrollmentId:x,initiationId:b,clientKey:g,loadingContext:h});return t.authorizationOptions&&I(t.authorizationOptions),t},[E,x,b,g,h]);return a(()=>{d(A.current)},[d]),a(()=>{E&&k(E)},[E]),"await"===m?t(p,{logos:z,type:y,countdownTime:u,clientKey:g,onError:w,awaitText:C.get("paybybankpix.await.fetchDetails"),pollStatus:S}):t(s,{classNameModifiers:["standalone"],label:C.get("paybybankpix.redirectBtn.label"),status:P,amount:f,onClick:c})}export{c as default};
//# sourceMappingURL=StoredPayment.js.map
